{% extends "base.html" %}

{% block title %}Blog - TerraLumen{% endblock %}

{% block meta_description %}Read articles about plasma healing research, detoxification science, consciousness, sovereignty, shamanic wisdom, and hypnosis for behavioral transformation.{% endblock %}

{% block content %}
<!-- Page Header -->
<section class="hero" style="padding: var(--spacing-xl) 0;">
    <!-- Background Video -->
    <video class="hero-video" autoplay muted loop playsinline>
        <source src="{{ url_for('static', filename='video/terralumen-blog.mp4') }}" type="video/mp4">
    </video>
    <div class="hero-overlay"></div>
    <div class="container">
        <div class="hero-content">
            <h1 class="hero-title">TerraLumen Blog</h1>
            <p class="hero-subtitle">
                Insights on healing, consciousness, and human evolution
            </p>
        </div>
    </div>
</section>

<!-- Blog Posts Section -->
<section class="section">
    <div class="container">
        {% if articles %}
            <div class="grid grid-2">
                {% for article in articles %}
                    <article class="card">
                        {% if article.featured_image %}
                            <div style="margin-bottom: var(--spacing-md);">
                                <img src="{{ url_for('static', filename='uploads/' + article.featured_image) }}" 
                                     alt="{{ article.title }}" 
                                     style="width: 100%; height: 200px; object-fit: cover; border-radius: var(--radius-md);">
                            </div>
                        {% endif %}
                        
                        <div class="card-header">
                            <h2 class="card-title">
                                <a href="{{ url_for('main.article', slug=article.slug) }}" 
                                   style="color: var(--color-forest-green);">
                                    {{ article.title }}
                                </a>
                            </h2>
                            <p style="color: var(--color-charcoal); font-size: 0.875rem; margin-bottom: 0;">
                                {% if article.published_at %}
                                    {{ article.published_at.strftime('%B %d, %Y') }}
                                {% endif %}
                                {% if article.is_member_only %}
                                    <span style="color: var(--color-soft-gold); font-weight: 600; margin-left: var(--spacing-sm);">
                                        Members Only
                                    </span>
                                {% endif %}
                            </p>
                        </div>
                        
                        <div class="card-body">
                            {% if article.excerpt %}
                                <p>{{ article.excerpt }}</p>
                            {% elif article.content %}
                                <p>{{ (article.content|striptags)[:200] }}{% if article.content|length > 200 %}...{% endif %}</p>
                            {% else %}
                                <p>No content available.</p>
                            {% endif %}
                        </div>
                        
                        <div class="card-footer">
                            <a href="{{ url_for('main.article', slug=article.slug) }}" class="btn btn-outline">
                                Read More
                            </a>
                        </div>
                    </article>
                {% endfor %}
            </div>
            
            <!-- Pagination -->
            {% if pagination.pages > 1 %}
                <div style="margin-top: var(--spacing-xl); display: flex; justify-content: center; gap: var(--spacing-sm);">
                    {% if pagination.has_prev %}
                        <a href="{{ url_for('main.blog', page=pagination.prev_num) }}" class="btn btn-outline">
                            Previous
                        </a>
                    {% endif %}
                    
                    {% for page_num in range(1, pagination.pages + 1) %}
                        {% if page_num %}
                            {% if page_num == pagination.page %}
                                <span class="btn btn-primary" style="cursor: default;">
                                    {{ page_num }}
                                </span>
                            {% else %}
                                <a href="{{ url_for('main.blog', page=page_num) }}" class="btn btn-outline">
                                    {{ page_num }}
                                </a>
                            {% endif %}
                        {% else %}
                            <span style="padding: var(--spacing-sm);">...</span>
                        {% endif %}
                    {% endfor %}
                    
                    {% if pagination.has_next %}
                        <a href="{{ url_for('main.blog', page=pagination.next_num) }}" class="btn btn-outline">
                            Next
                        </a>
                    {% endif %}
                </div>
            {% endif %}
        {% else %}
            <div class="card" style="max-width: 600px; margin: 0 auto; text-align: center;">
                <div class="card-body">
                    <h2>No articles yet</h2>
                    <p>Check back soon for articles on plasma healing, detoxification, consciousness, and more.</p>
                </div>
            </div>
        {% endif %}
    </div>
</section>

<!-- CTA Section -->
<section class="section section-alt">
    <div class="container">
        <div class="text-center">
            <h2>Want Exclusive Content?</h2>
            <p style="font-size: 1.125rem; margin-bottom: var(--spacing-lg);">
                Members get access to exclusive articles, research findings, and educational content.
            </p>
            <a href="{{ url_for('main.membership') }}" class="btn btn-primary btn-large">
                Become a Member
            </a>
        </div>
    </div>
</section>
{% endblock %}

